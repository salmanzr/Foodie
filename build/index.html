

<!DOCTYPE html>
<html>

<head>
    <title>MARIA</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href='./app.css' rel='stylesheet' type='text/css'>
    <style type="text/css">
    .bs-example {
        margin: 5px;
    }
    </style>
</head>

<body>
    <div id="mytabs">
        <nav class="navbar navbar-custom navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <span class="icon-bar"></span><a href="/#/" class="navbar-brand">MARIA ™</a>
                </div>
                <div>
                    <p class="navbar-text navbar-right" id="loginStatus" style ="display:none">Logged in as <a href="#" class="navbar-link" id="actor">Physician</a>
                    </p>
                </div>
            </div>
        </nav>
    </div>
    <div class="header">
        <h3>MARIA</h3>
    </div>
    <div class="clear">
        <div class="section">
            </br>
            <a href="http://localhost:8081/"><img src="https://image.ibb.co/cAAMJH/meraki_0_cropped.png" alt="meraki_0_cropped" border="0"></a>
            </br>
            </br>
            <h2>Artificial Intelligence Research Assistant for Medicine</h2>
        </div>
    </div>
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#sectionA" id="phy_tab"><i class="fa fa-user-md"></i> Physician</a></li>
        <li><a data-toggle="tab" href="#sectionB" id="sci_tab"><i class="fa fa-user"></i> Scientist</a></li>
        <li><a data-toggle="tab" href="#sectionC" id="lea_tab"><i class="fa fa-trophy"></i> Leaderboard</a></li>
        <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#"><i class="fa fa-link"></i>  Blockchain View <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a data-toggle="tab" href="#dropdown1"><i class="fa fa-archive"></i> Event Monitor</a></li>
                <li><a data-toggle="tab" href="#dropdown2"><i class="fa fa-cubes"></i> Block Explorer</a></li>
            </ul>
        </li>
        <li><a data-toggle="tab" href="#sectionD" id="fhir_tab"><i class="fa fa-fire"></i> FHIR Viewer</a></li>
    </ul>
    <div class="tab-content">
        <div id="sectionA" class="tab-pane fade in active">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="physicianAccount"></div>
                <div class="col-xs-10" id="physicianBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse1">
          Create Competition
        </a>
      </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="demo-content bg-alt">
                                    <div>
                                            <button id="deployContract" class="btn btn-primary">Initiate Competition Factory</button>
                                            <span class="success" id="deployContractSuccess"></span>
                                        </div>
                                    </br>
                                <div class="form-group">
                                    <label for="inputPrize">Prize</label>
                                    <input type="text" class="form-control" id="inputPrize" placeholder="Enter Prize Amount">
                                </div>                                
                                <div class="form-group">
                                    <label for="inputDeadline">Deadline</label>
                                    <input type="text" class="form-control" id="inputDeadline" placeholder="Enter Deadline">
                                </div>
                                </br>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Dataset</span>
                                    <input name="uploaded_file" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());store();" style="display: none;" type="file" id="source">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccess"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadDatasetSuccess"></span>
                                </div>                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionB" class="tab-pane fade">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="scientistAccount"></div>
                <div class="col-xs-10" id="scientistBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse2">
          Competitions
        </a>
      </h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <!-- <div id="competitionId" style="display:none;">-->
                            <div id="competitionId">
                                <table class="table table-striped">
                                    <tbody>
                                        <tr>
                                            <th colspan="2" style="text-align:left">Description</th>
                                        </tr>
                                        <tr>
                                            <td>Id</td>
                                            <td id="theCompetitionId"></td>
                                        </tr>
                                        <tr>
                                            <td>Prize</td>
                                            <td id="thePrize"></td>
                                        </tr>
                                        <tr>
                                            <td>Deadline</td>
                                            <td id="theDeadline"></td>
                                        </tr>
                                        <tr>
                                            <td>Dataset</td>
                                            <td id="hash"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </br>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit Model</span>
                                    <input name="uploaded_file2" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());store2();" style="display: none;" type="file" id="source2">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccess2"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadDatasetSuccess2"></span>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="inputWinner" placeholder="Enter the winner's address">
                                </div>
                                <div>
                                <button id="doPayouts" class="btn btn-primary">Execute Payouts</button>
                                <span class="success" id="payoutSuccess"></span>
                            </div>
                                </br>
                                </br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionC" class="tab-pane fade">
                <div class="section">
                        <table id="competitions" class="table table-striped">
                            <thead id="competitionsheader">
                                <th>CompetitionId</th>
                                <th>Prize</th>
                                <th>Winner</th>
                            </thead>
                            <tbody id="competitionsbody">
                            </tbody>
                        </table>
                    </div>
        </div>
        <div id="dropdown1" class="tab-pane fade">
            <div class="section">
                <table id="audittrail" class="table table-striped">
                    <thead id="audittrailheader">
                        <th>Action</th>
                        <th>CompetitionId</th>
                        <th>Actor</th>
                        <th>Data</th>
                        <th>Cost</th>
                        <th>Timestamp</th>
                    </thead>
                    <tbody id="audittrailbody">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="dropdown2" class="tab-pane fade">
            <div class="section">
                <table id="”transactions" class="table table-striped">
                    <thead id="transactionsheader">
                        <th>Block</th>
                        <th>Hash</th>
                        <th>Parent Hash</th>
                        <!--<th>Timestamp</th>-->
                    </thead>
                    <tbody id="transactionsbody">
                    </tbody>
                </table>
            </div>
            <div id="modalBlockDetails" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <center>
                            <div class="modal-header">
                                <h4 class="modal-title">Block Details</h4>
                            </div>
                            <div class="modal-body">
                                <table class="table table-striped">
                                    <tbody>
                                        <tr>
                                            <th colspan="2" style="text-align:left">Summary</th>
                                        </tr>
                                        <tr>
                                            <td>Block Number</td>
                                            <td id="blkNum"></td>
                                        </tr>
                                        <tr>
                                            <td>Transaction Count</td>
                                            <td id="transactionCount">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Transactions</td>
                                            <td id="transactions">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Received Time</td>
                                            <td id="timestamp">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Difficulty</td>
                                            <td id="difficulty">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Nonce</td>
                                            <td id="nonce"></td>
                                        </tr>
                                        <tr>
                                            <td>Size</td>
                                            <td id="size"></td>
                                        </tr>
                                        <tr>
                                            <td>Miner</td>
                                            <td id="miner"></td>
                                        </tr>
                                        <tr>
                                            <td>Gas Limit</td>
                                            <td id="gasLimit"></td>
                                        </tr>
                                        <tr>
                                            <td>Gas Used</td>
                                            <td id="gasUsed"></td>
                                        </tr>
                                        <tr>
                                            <td>Receipt Root</td>
                                            <td id="receiptRoot"></td>
                                        </tr>
                                        <tr>
                                            <td>State Root</td>
                                            <td id="stateRoot"> </td>
                                        </tr>
                                        <tr>
                                            <td>Sha3 Uncles </td>
                                            <td id="sha3Uncles"> </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button id="modalClose" class="btn btn-primary">Close</button>
                        </center>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionD" class="tab-pane fade">
            <div class="section">
                <div>
                    <button id="deployContract" class="btn btn-primary">Fetch Sample FHIR Data</button>
                    <span class="success" id="fetchFHIRDataSuccess"></span>
                </div>

                <table id="patientData" class="table table-striped">
                    <thead id="patientDataHeader">
                        <th>(CSV Column Headers Here, when determined)</th>
                    </thead>
                    <tbody>
                    <tr><td>CSV DATA HERE</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/sweetalert2@7.18.0/dist/sweetalert2.all.js"></script>
<script src="https://unpkg.com/ipfs/dist/index.js"></script>
<script src="https://unpkg.com/ipfs-api/dist/index.js"></script>
<script src="./app.js"></script>
<script>
swal({
  title: 'Login',
  backdrop:  `
    rgba(0,0,0,0.8)
    center left
    no-repeat
  `,
  html:
    '<input id="swal-input1" class="swal2-input" placeholder ="Username">' +
    '<input id="swal-input2" class="swal2-input" type="password" placeholder ="Password">',
  preConfirm: function () {
    return new Promise(function (resolve) {
      resolve([
        $('#swal-input1').val(),
        $('#swal-input2').val()
      ])
    })
  },
  onOpen: function () {
    $('#swal-input1').focus()
  }
}).then(function (result) {
  swal(
      'Logged in as Physician',
      '',
      'success'
    ).then((result) => {    
    demoLogin();    
    });
}).catch(swal.noop)
</script>
<script src="https://rawgithub.com/smart-on-fhir/client-js/master/dist/fhir-client.js"></script>
<script src="./javascripts/app.js"></script>
<script src="./javascripts/fhir-patient.js"></script>

</html>
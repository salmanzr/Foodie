

<!DOCTYPE html>
<html>

<head>
    <title>Foodie</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href='./app.css' rel='stylesheet' type='text/css'>
    <style type="text/css">
    .bs-example {
        margin: 5px;
    }
    </style>
</head>

<body>
    <div id="mytabs">
        <nav class="navbar navbar-custom navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <span class="icon-bar"></span><a href="/#/" class="navbar-brand">Foodies</a>
                </div>
                <div>
                    <p class="navbar-text navbar-right" id="loginStatus" style ="display:none">Logged in as <a href="#" class="navbar-link" id="actor">Farmer</a>
                    </p>
                </div>
            </div>
        </nav>
    </div>
    <div class="header">
        <h3>Foodies</h3>
    </div>
    <div class="clear">
        <div class="section">
            </br>
            <a href="http://localhost:8081/"><img src="https://raw.githubusercontent.com/salmanzr/Foodie/master/logo.png" alt="meraki_0_cropped" border="0"></a>
            </br>
            </br>
        </div>
    </div>
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#sectionA" id="far_tab"><i class="fa fa-shopping-basket"></i> Farmer</a></li>
        <li><a data-toggle="tab" href="#sectionB" id="agg_tab"><i class="fa fa-sitemap"></i> Warehouse</a></li>
        <li><a data-toggle="tab" href="#sectionC" id="war_tab"><i class="fa fa-university"></i> Retailer</a></li>
        <li><a data-toggle="tab" href="#sectionD" id="kit_tab"><i class="fa fa-cutlery"></i> Consumer</a></li>
        <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#"><i class="fa fa-link"></i>  Blockchain View <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a data-toggle="tab" href="#dropdown1"><i class="fa fa-archive"></i> Event Monitor</a></li>
                <li><a data-toggle="tab" href="#dropdown2"><i class="fa fa-cubes"></i> Block Explorer</a></li>
            </ul>
        </li>
    </ul>
    <div class="tab-content">
        <div id="sectionA" class="tab-pane fade in active">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="farmerAccount"></div>
                <div class="col-xs-10" id="farmerBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse1">
          Produce Tracker
        </a>
      </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="demo-content bg-alt">
                                    <div>
                                            <button id="deployContract" class="btn btn-primary">Initiate Produce Tracker</button>
                                            <span class="success" id="deployContractSuccess"></span>
                                        </div>
                                    </br>
                                <div class="form-group">
                                    <label for="inputQuantity">Quantity</label>
                                    <input type="text" class="form-control" id="inputQuantity" placeholder="Enter produce quantity">
                                </div>                                
                                <div class="form-group">
                                    <label for="inputDate">Harvest Date</label>
                                    <input type="text" class="form-control" id="inputDate" placeholder="Enter harvest date">
                                </div>
                                </br>
                                <div class="input-group">
                                    <span class="input-group-btn">
                                    <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">Submit QR Code</span>
                                    <input name="uploaded_file" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());store();" style="display: none;" type="file" id="source">
                                    </span>
                                    <span class="form-control"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadIpfsSuccess"></span>
                                </div>
                                <div>
                                    <span class="success" id="uploadDatasetSuccess"></span>
                                </div>                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionB" class="tab-pane fade">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="aggregatorAccount"></div>
                <div class="col-xs-10" id="aggregatorBalance"></div>
            </div>
            </br>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapse2">
          List of Produces
        </a>
      </h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <!-- <div id="produceId" style="display:none;">-->
                            <div id="produceId">
                                <table class="table table-striped">
                                    <tbody>
                                        <tr>
                                            <th colspan="2" style="text-align:left">Description</th>
                                        </tr>
                                        <tr>
                                            <td>Id</td>
                                            <td id="theProduceId"></td>
                                        </tr>
                                        <tr>
                                            <td>Quantity</td>
                                            <td id="theQuantity"></td>
                                        </tr>
                                        <tr>
                                            <td>Harvest Date</td>
                                            <td id="theDate"></td>
                                        </tr>
                                        <tr>
                                            <td>QR Code</td>
                                            <td id="hash"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </br>
                        </br>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="inputReceiver" placeholder="Enter the retailer address">
                                </div>
                                <div>
                                <button id="doDeliveries" class="btn btn-primary">Send produces to retailer</button>
                                <span class="success" id="aggregationSuccess"></span>
                            </div>
                                </br>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="sectionC" class="tab-pane fade">
            </br>
            <div class="row row-bordered">
                <div class="col-xs-10" id="warehouseAccount"></div>
                <div class="col-xs-10" id="warehouseBalance"></div>
            </div>
                <div class="section">
                        <table id="produces" class="table table-striped">
                            <thead id="producesHeader">
                                <th>Produce</th>
                                <th>QR Codes in IPFS</th>
                                <th>Farmers</th>
                            </thead>
                            <tbody id="producesbody">
                            </tbody>
                        </table>
                    </div>
        </div>
        <div id="sectionD" class="tab-pane fade">
        </br>
        <a href="http://localhost:8081/"><img src="https://raw.githubusercontent.com/salmanzr/Foodie/master/cabbage.jpg" alt="meraki_0_cropped" border="0"></a>
        <a href="http://localhost:8081/"><img src="https://raw.githubusercontent.com/salmanzr/Foodie/master/tomato.jpeg" alt="meraki_0_cropped" border="0"></a>
        <a href="http://localhost:8081/"><img src="https://raw.githubusercontent.com/salmanzr/Foodie/master/apple.jpeg" alt="meraki_0_cropped" border="0"></a>
        <a href="http://localhost:8081/"><img src="https://raw.githubusercontent.com/salmanzr/Foodie/master/egg.jpg" alt="meraki_0_cropped" border="0"></a>        
        </div>
        <div id="dropdown1" class="tab-pane fade">
            <div class="section">
                <table id="audittrail" class="table table-striped">
                    <thead id="audittrailheader">
                        <th>Action</th>
                        <th>ProduceId</th>
                        <th>Actor</th>
                        <th>Data</th>
                        <th>Timestamp</th>
                    </thead>
                    <tbody id="audittrailbody">
                    </tbody>
                </table>
            </div>
        </div>
        <div id="dropdown2" class="tab-pane fade">
            <div class="section">
                <table id="â€transactions" class="table table-striped">
                    <thead id="transactionsheader">
                        <th>Block</th>
                        <th>Hash</th>
                        <th>Parent Hash</th>
                        <!--<th>Timestamp</th>-->
                    </thead>
                    <tbody id="transactionsbody">
                    </tbody>
                </table>
            </div>
            <div id="modalBlockDetails" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <center>
                            <div class="modal-header">
                                <h4 class="modal-title">Block Details</h4>
                            </div>
                            <div class="modal-body">
                                <table class="table table-striped">
                                    <tbody>
                                        <tr>
                                            <th colspan="2" style="text-align:left">Summary</th>
                                        </tr>
                                        <tr>
                                            <td>Block Number</td>
                                            <td id="blkNum"></td>
                                        </tr>
                                        <tr>
                                            <td>Transaction Count</td>
                                            <td id="transactionCount">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Transactions</td>
                                            <td id="transactions">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Received Time</td>
                                            <td id="timestamp">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Difficulty</td>
                                            <td id="difficulty">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Nonce</td>
                                            <td id="nonce"></td>
                                        </tr>
                                        <tr>
                                            <td>Size</td>
                                            <td id="size"></td>
                                        </tr>
                                        <tr>
                                            <td>Miner</td>
                                            <td id="miner"></td>
                                        </tr>
                                        <tr>
                                            <td>Gas Limit</td>
                                            <td id="gasLimit"></td>
                                        </tr>
                                        <tr>
                                            <td>Gas Used</td>
                                            <td id="gasUsed"></td>
                                        </tr>
                                        <tr>
                                            <td>Receipt Root</td>
                                            <td id="receiptRoot"></td>
                                        </tr>
                                        <tr>
                                            <td>State Root</td>
                                            <td id="stateRoot"> </td>
                                        </tr>
                                        <tr>
                                            <td>Sha3 Uncles </td>
                                            <td id="sha3Uncles"> </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button id="modalClose" class="btn btn-primary">Close</button>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/sweetalert2@7.18.0/dist/sweetalert2.all.js"></script>
<script src="https://unpkg.com/ipfs/dist/index.js"></script>
<script src="https://unpkg.com/ipfs-api/dist/index.js"></script>
<script src="./app.js"></script>
<script>
swal({
  title: 'Login',
  backdrop:  `
    rgba(0,0,0,0.8)
    center left
    no-repeat
  `,
  html:
    '<input id="swal-input1" class="swal2-input" placeholder ="Username">' +
    '<input id="swal-input2" class="swal2-input" type="password" placeholder ="Password">',
  preConfirm: function () {
    return new Promise(function (resolve) {
      resolve([
        $('#swal-input1').val(),
        $('#swal-input2').val()
      ])
    })
  },
  onOpen: function () {
    $('#swal-input1').focus()
  }
}).then(function (result) {
  swal(
      'Logged in as Farmer',
      '',
      'success'
    ).then((result) => {    
    demoLogin();    
    });
}).catch(swal.noop)
</script>
<script src="./javascripts/app.js"></script>

</html>